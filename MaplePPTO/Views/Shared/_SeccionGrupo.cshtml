@model KeyValuePair<int, List<MaplePPTO.ViewModels.ResultPpto>>
@{
    var subGrupos = Model.Value?.GroupBy(x => x.subgrupo).ToDictionary(g => g.Key, g => g.ToList());
    var headers = (List<string>)ViewBag.listHeader;

    Dictionary<int, string> tablesData = new Dictionary<int, string>();

    var tieneSUbtitulos = false;
    if (Model.Key == 1) { tablesData = MaplePPTO.Constants.GruposBudReport.Revenue.tables; }
    else if (Model.Key == 2) { tablesData = MaplePPTO.Constants.GruposBudReport.DirectCost.tables; }
    else if (Model.Key == 3)
    {
        tablesData = MaplePPTO.Constants.GruposBudReport.GeneralExpenses.tables;
        tieneSUbtitulos = true;
    }
}



@if (subGrupos != null)
{




    foreach (var data in subGrupos)
    {
        if (tieneSUbtitulos && data.Key == 1)
        {
            <h6 class="text-primary">@MaplePPTO.Constants.GruposBudReport.GeneralExpenses.Ips</h6>
        }
        else if (tieneSUbtitulos && data.Key == 4)
        {
            <h6 class="text-primary">@MaplePPTO.Constants.GruposBudReport.GeneralExpenses.Head</h6>
        }
        <table style="font-size:12px" class="table table-sm table-bordered table-hover">
            <thead>
                <tr>
                    <th>
                        @tablesData[(data.Key)]
                    </th>

                    @if (headers != null)
                    {
                        foreach (var item in headers)
                        {
                            <th class="text-uppercase text-nowrap">
                                @item
                            </th>
                        }
                    }

                </tr>
            </thead>
            <tbody>
                @foreach (var item in data.Value)
                {
                    <tr>
                        <td class="text-nowrap" style="min-width:190px">@item.concepto</td>

                        @*@if (Model.mesesFaltantesAnioBase == 6)
                            {
                                <td class="text-right">@Math.Round(double.Parse(item.mesant6), 0)</td>
                            }
                            @if (Model.mesesFaltantesAnioBase >= 5)
                            {
                                <td class="text-right">@Math.Round(double.Parse(item.mesant5), 0)</td>
                            }
                            @if (Model.mesesFaltantesAnioBase >= 4)
                            {
                                <td class="text-right">@Math.Round(double.Parse(item.mesant4), 0)</td>
                            }
                            @if (Model.mesesFaltantesAnioBase >= 3)
                            {
                                <td class="text-right">@Math.Round(double.Parse(item.mesant3), 0)</td>
                            }
                            @if (Model.mesesFaltantesAnioBase >= 2)
                            {
                                <td class="text-right">@Math.Round(double.Parse(item.mesant2), 0)</td>
                            }
                            @if (Model.mesesFaltantesAnioBase >= 1)
                            {
                                <td class="text-right">@Math.Round(double.Parse(item.mesant1), 0)</td>
                            }*@
                        <td class="text-right">@Math.Round(double.Parse(item.mes1), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes2), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes3), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes4), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes5), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes6), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes7), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes8), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes9), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes10), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes11), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes12), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes13), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes14), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes15), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes16), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes17), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes18), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes19), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes20), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes21), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes22), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes23), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes24), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes25), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes26), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes27), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes28), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes29), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes30), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes31), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes32), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes33), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes34), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes35), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes36), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes37), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes38), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes39), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes40), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes41), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes42), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes43), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes44), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes45), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes46), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes47), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes48), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes49), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes50), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes51), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes52), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes53), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes54), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes55), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes56), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes57), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes58), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes59), 0)</td>
                        <td class="text-right">@Math.Round(double.Parse(item.mes60), 0)</td>
                    </tr>

                }

            </tbody>

        </table>
    }
}



